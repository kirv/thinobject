error () {
    # synopsis: error [-x N] OUTPUT_LINE ...
    local -i n=1
    test "$1" = -x && n=$2 && shift 2
    warn "$@"
    exit $n
    }
export -f error
