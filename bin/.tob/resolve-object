resolve_object () { 
    #               resolve directory or attribute object or return code 6
    #               return values 0 to 4 are from get_type()
    #               get_type() sets TOB_type, TOB_path_to_object
    local obspec=$1
    local path=. # assume path is relative
    test ${obspec:0:1} = / && path="" # no, path is absolute
    unset prefix
    for elem in ${obspec//./ }; do          # split into elements on dots
        test -n "$prefix" && elem=$prefix.$elem && unset prefix
        if test ${elem: -1:1} = /; then     # element is explicitly a directory
            path+=/${elem%/}
        elif test -d $path/$elem; then      # dot-terminated directory
            path+=/$elem
        elif test -d $path/${elem%/*}/.${elem##*/}; then # hidden directory
            path="$path/${elem%/*}/.${elem##*/}"
        elif test -d $path/.$elem; then # hidden directory
            path="$path/.$elem"
        elif test -L $path/$elem; then      # hidden dir behind symlink?
            target="$(readlink -f $path/$elem)"
            leaf="${target##*/}"
            target="${target%/*}"
            if test -d "$target/.$leaf"; then
                path="$target/.$leaf"
            else
                prefix=$elem
            fi
        elif test -L $path/.$elem; then     # hidden dir behind hidden symlink?
            target=$(readlink -f $path/.$elem)
            leaf=${target##*/}
            target=${target%/*}
            if test -d $target/.$leaf; then
                path=$target/.$leaf
            else
                prefix=$elem
            fi
        else
            prefix=$elem
        fi
    done
    test -z "$prefix" && {  # a directory object was resolved
        get_type $path
        return
        }
    resolve_attr_declaration $path $prefix || return
    return 6                                # no object was resolved
    }
