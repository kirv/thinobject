resolve_anonymous_object () { # try to resolve object type at path
    # if o=m, then this directory is an anonymous object, no name
    # if $path itself is a dir object with a ^ link, we're done:
    test -L $path/^ -o -L $path/.^ && {
        type=$(readlink $path/^ || readlink $path/.^)
        method="${query[*]:o}"
        method="${method// /.}"
        cd $path || return 2
        TOB_path_to_object=$path
        TOB_method=$method
        }

